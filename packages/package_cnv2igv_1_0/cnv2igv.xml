<tool id="cnv2igv" name="cnv2igv" version="1.0">
	<description>VarDict is a variant discovery program. It can run in single sample, paired sample, or amplicon bias aware modes.</description>

	<requirements>
		<requirement type="package" version="1.0">cnv2igv</requirement>
		<requirement type="set_environment">CNV2IGV_DIR</requirement>
	</requirements> 

	<command>
	
		python \$CNV2IGV_DIR/cnv2igv.py 
		
		#if $sample_select.seqortitan == "seq"
			--mode sequenza --sequenza_sample $sample_select.samplename 
		#elif $sample_select.seqortitan == "tit"
			--mode titan
		#end if
		
		#if $sample_select.includeloh == "seq" and $sample_select.abs_cn == "true"
			--use_abs_cn 
		#end if
		
		#if $sample_select.includeloh == "neu" 
			--include_loh neutral
		#elif $sample_select.includeloh == "del" 
			--include_loh deletion
		#elif $sample_select.includeloh == "any" 
			--include_loh any
		#end if
		
		
		#if $sample_select.seqortitan == "seq"
			$sample_select.sequenza 
		#elif $sample_select.seqortitan == "tit"
			$sample_select.titan 
		#end if 
		
		> $out_file;

	</command>  

	<inputs>
	
		<conditional name="sample_select">
			<param name="seqortitan" type="select" label="Input Sequenza or Titan file" help="Input file for conversion is from: 1) Sequenza. 2) Titan. 3)Other" >
				<option value="seq" selected="True">1) Sequenza</option>
				<option value="tit">2) Titan</option>
				<option value="ot">3) Other</option>
			</param>
			
			<when value="seq">
				<param name="sequenza" type="data" format="tabular" label="Sequenza output file"/>
				<param name="samplename" type="text" label="Enter sample ID" help="Enter a sample ID or name to be used in first column"/>
				
				<param name="abs_cn" type="boolean" label="Use absolute copy number when calculating log2 value instead of depth ratio" value="false" />
				<param name="includeloh" type="select" label="Include a column indicating whether the segment represents a loss heterozygosity." >
					<option value="dont_include" selected="True">1) Dont include column</option>
					<option value="neu">2) neutral</option>
					<option value="del">3) deletion</option>
					<option value="any">4) any</option>
				</param>
			</when>
			
			<when value="tit">
				<param name="titan" type="data" format="tabular" label="titan output file"/>
				<param name="includeloh" type="select" label="Include a column indicating whether the segment represents a loss heterozygosity." >
					<option value="dont_include" selected="True">1) Dont include column</option>
					<option value="neu">2) neutral</option>
					<option value="del">3) deletion</option>
					<option value="any">4) any</option>
				</param>
			</when>
			
			<when value="ot">
			</when>
		</conditional>

	</inputs>
	
	<outputs>

		<data name="out_file" label="${tool.name} igv file on ${on_string}" format="tabular">

		</data>

	</outputs>

	<help>

	</help>

</tool>

